{"remainingRequest":"E:\\工作(林)\\YH_kehucaijixinxi\\code\\wb\\WeBank\\node_modules\\babel-loader\\lib\\index.js!E:\\工作(林)\\YH_kehucaijixinxi\\code\\wb\\WeBank\\common\\store.js","dependencies":[{"path":"E:\\工作(林)\\YH_kehucaijixinxi\\code\\wb\\WeBank\\common\\store.js","mtime":1681782968941},{"path":"E:\\工作(林)\\YH_kehucaijixinxi\\code\\wb\\WeBank\\babel.config.js","mtime":1681782968933},{"path":"E:\\工作(林)\\YH_kehucaijixinxi\\code\\wb\\WeBank\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681782977946},{"path":"E:\\工作(林)\\YH_kehucaijixinxi\\code\\wb\\WeBank\\node_modules\\babel-loader\\lib\\index.js","mtime":1681782976971}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport Vuex from 'vuex';\nimport local from \"./_local.js\";\nimport http from \"./http.js\";\nVue.use(Vuex);\nvar loginObject = {\n  login: function login(param) {\n    return new Promise(function (resolve, reject) {\n      http.get({\n        url: \"/user/info\",\n        param: param.data\n      }).then(function (data) {\n        console.log(data);\n        console.log(\"++++++++++++++++++++++++++++++++++++++++++++====\");\n        if (!param.rem) {\n          local.setItem(\"LIMITS\", data.limits);\n          local.setItem(\"USER_ID\", data.userId);\n          local.setItem(\"USER_NAME\", data.userName);\n        }\n        local.session.setItem(\"CURRENT_USER\", data);\n        resolve(data);\n      });\n    });\n  }\n};\nvar store = new Vuex.Store({\n  state: {\n    isAlreadyLogin: false,\n    currentUser: undefined\n  },\n  mutations: {\n    checkLogin: function checkLogin(state) {\n      var currentUser = local.session.getItem(\"CURRENT_USER\");\n      if (currentUser) {\n        state.isAlreadyLogin = true;\n        state.currentUser = currentUser;\n        return;\n      }\n      return;\n      var loginParam = local.getItem(\"LOGIN_INFO\");\n      if (loginParam && loginParam.data && loginParam.data.password && loginParam.data.account) {\n        loginObject.login(loginParam).then(function (data) {\n          state.isAlreadyLogin = true;\n          state.currentUser = data;\n        });\n      }\n    },\n    login: function login(state, param) {\n      loginObject.login(param).then(function (data) {\n        state.isAlreadyLogin = true;\n        state.currentUser = data;\n      });\n    },\n    loginOut: function loginOut(state) {\n      state.isAlreadyLogin = false;\n      state.currentUser = undefined;\n      local.session.removeItem(\"CURRENT_USER\");\n    }\n  }\n});\nstore.local = local;\nexport default store;",{"version":3,"names":["Vue","Vuex","local","http","use","loginObject","login","param","Promise","resolve","reject","get","url","data","then","console","log","rem","setItem","limits","userId","userName","session","store","Store","state","isAlreadyLogin","currentUser","undefined","mutations","checkLogin","getItem","loginParam","password","account","loginOut","removeItem"],"sources":["E:/工作(林)/YH_kehucaijixinxi/code/wb/WeBank/common/store.js"],"sourcesContent":["import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nimport local from './_local.js';\r\nimport http from './http.js';\r\n\r\nVue.use(Vuex);\r\n\r\nlet loginObject = {\r\n\tlogin: function(param) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\thttp.get({\r\n\t\t\t\turl: \"/user/info\",\r\n\t\t\t\tparam: param.data\r\n\t\t\t}).then(data => {\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\tconsole.log(\"++++++++++++++++++++++++++++++++++++++++++++====\")\r\n\t\t\t\tif (!param.rem) {\r\n\t\t\t\t\tlocal.setItem(\"LIMITS\", data.limits);\r\n\t\t\t\t\tlocal.setItem(\"USER_ID\",data.userId);\r\n\t\t\t\t\tlocal.setItem(\"USER_NAME\",data.userName);\r\n\t\t\t\t}\r\n\t\t\t\tlocal.session.setItem(\"CURRENT_USER\", data);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\tresolve(data);\r\n\t\t\t\t\t\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n};\r\n\r\nconst store = new Vuex.Store({\r\n\tstate: {\r\n\t\tisAlreadyLogin: false,\r\n\t\tcurrentUser: undefined\r\n\t},\r\n\tmutations: {\r\n\t\tcheckLogin(state) {\r\n\t\t\tlet currentUser = local.session.getItem(\"CURRENT_USER\");\r\n\t\t\tif (currentUser) {\r\n\t\t\t\tstate.isAlreadyLogin = true;\r\n\t\t\t\tstate.currentUser = currentUser;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t\tlet loginParam = local.getItem(\"LOGIN_INFO\");\r\n\t\t\tif (loginParam && \r\n\t\t\t\tloginParam.data &&\r\n\t\t\t\tloginParam.data.password && \r\n\t\t\t\tloginParam.data.account) {\r\n\t\t\t\tloginObject.login(loginParam).then(data => {\r\n\t\t\t\t\tstate.isAlreadyLogin = true;\r\n\t\t\t\t\tstate.currentUser = data;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tlogin(state, param) {\r\n\t\t\tloginObject.login(param).then(data => {\r\n\t\t\t\tstate.isAlreadyLogin = true;\r\n\t\t\t\tstate.currentUser = data;\r\n\t\t\t});\r\n\t\t},\r\n\t\tloginOut(state) {\r\n\t\t\tstate.isAlreadyLogin = false;\r\n\t\t\tstate.currentUser = undefined;\r\n\t\t\tlocal.session.removeItem(\"CURRENT_USER\");\r\n\t\t}\r\n\t}\r\n});\r\nstore.local = local;\r\n\r\nexport default store;\r\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,IAAI,MAAM,MAAM;AACvB,OAAOC,KAAK;AACZ,OAAOC,IAAI;AAEXH,GAAG,CAACI,GAAG,CAACH,IAAI,CAAC;AAEb,IAAII,WAAW,GAAG;EACjBC,KAAK,EAAE,SAAAA,MAASC,KAAK,EAAE;IACtB,OAAO,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;MACvCP,IAAI,CAACQ,GAAG,CAAC;QACRC,GAAG,EAAE,YAAY;QACjBL,KAAK,EAAEA,KAAK,CAACM;MACd,CAAC,CAAC,CAACC,IAAI,CAAC,UAAAD,IAAI,EAAI;QACfE,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC;QACjBE,OAAO,CAACC,GAAG,CAAC,kDAAkD,CAAC;QAC/D,IAAI,CAACT,KAAK,CAACU,GAAG,EAAE;UACff,KAAK,CAACgB,OAAO,CAAC,QAAQ,EAAEL,IAAI,CAACM,MAAM,CAAC;UACpCjB,KAAK,CAACgB,OAAO,CAAC,SAAS,EAACL,IAAI,CAACO,MAAM,CAAC;UACpClB,KAAK,CAACgB,OAAO,CAAC,WAAW,EAACL,IAAI,CAACQ,QAAQ,CAAC;QACzC;QACAnB,KAAK,CAACoB,OAAO,CAACJ,OAAO,CAAC,cAAc,EAAEL,IAAI,CAAC;QAI3CJ,OAAO,CAACI,IAAI,CAAC;MAEd,CAAC,CAAC;IACH,CAAC,CAAC;EACH;AACD,CAAC;AAED,IAAMU,KAAK,GAAG,IAAItB,IAAI,CAACuB,KAAK,CAAC;EAC5BC,KAAK,EAAE;IACNC,cAAc,EAAE,KAAK;IACrBC,WAAW,EAAEC;EACd,CAAC;EACDC,SAAS,EAAE;IACVC,UAAU,WAAAA,WAACL,KAAK,EAAE;MACjB,IAAIE,WAAW,GAAGzB,KAAK,CAACoB,OAAO,CAACS,OAAO,CAAC,cAAc,CAAC;MACvD,IAAIJ,WAAW,EAAE;QAChBF,KAAK,CAACC,cAAc,GAAG,IAAI;QAC3BD,KAAK,CAACE,WAAW,GAAGA,WAAW;QAC/B;MACD;MACA;MACA,IAAIK,UAAU,GAAG9B,KAAK,CAAC6B,OAAO,CAAC,YAAY,CAAC;MAC5C,IAAIC,UAAU,IACbA,UAAU,CAACnB,IAAI,IACfmB,UAAU,CAACnB,IAAI,CAACoB,QAAQ,IACxBD,UAAU,CAACnB,IAAI,CAACqB,OAAO,EAAE;QACzB7B,WAAW,CAACC,KAAK,CAAC0B,UAAU,CAAC,CAAClB,IAAI,CAAC,UAAAD,IAAI,EAAI;UAC1CY,KAAK,CAACC,cAAc,GAAG,IAAI;UAC3BD,KAAK,CAACE,WAAW,GAAGd,IAAI;QACzB,CAAC,CAAC;MACH;IACD,CAAC;IACDP,KAAK,WAAAA,MAACmB,KAAK,EAAElB,KAAK,EAAE;MACnBF,WAAW,CAACC,KAAK,CAACC,KAAK,CAAC,CAACO,IAAI,CAAC,UAAAD,IAAI,EAAI;QACrCY,KAAK,CAACC,cAAc,GAAG,IAAI;QAC3BD,KAAK,CAACE,WAAW,GAAGd,IAAI;MACzB,CAAC,CAAC;IACH,CAAC;IACDsB,QAAQ,WAAAA,SAACV,KAAK,EAAE;MACfA,KAAK,CAACC,cAAc,GAAG,KAAK;MAC5BD,KAAK,CAACE,WAAW,GAAGC,SAAS;MAC7B1B,KAAK,CAACoB,OAAO,CAACc,UAAU,CAAC,cAAc,CAAC;IACzC;EACD;AACD,CAAC,CAAC;AACFb,KAAK,CAACrB,KAAK,GAAGA,KAAK;AAEnB,eAAeqB,KAAK"}]}